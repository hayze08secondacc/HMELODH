local rs,uis,plr,shop=game:GetService("RunService"),game:GetService("UserInputService"),game.Players.LocalPlayer,workspace:WaitForChild("Ignored"):WaitForChild("Shop")
local state={originalCFrame=nil,originalStates={},processing=false,paused=false,stopped=false}
local function setNoclip(char,enabled)for _,p in ipairs(char:GetDescendants())do if p:IsA("BasePart")then if enabled then state.originalStates[p]=p.CanCollide p.CanCollide=false else if state.originalStates[p]~=nil then p.CanCollide=state.originalStates[p] end end end end end
local function teleportAndFreeze(hrp,pos) hrp.Anchored=false hrp.CFrame=CFrame.new(pos) task.wait(0.05) hrp.Anchored=true end
local function getClosestModelByName(name,rootPos)local closestModel=nil local closestDist=math.huge for _,m in ipairs(shop:GetChildren())do if m.Name==name then local primary=m:FindFirstChildWhichIsA("BasePart") or m:FindFirstChild("Handle") or m:FindFirstChild("Head") if primary then local d=(primary.Position-rootPos).Magnitude if d<closestDist then closestDist=d closestModel=m end end end end if closestModel then local cd=nil for _,desc in ipairs(closestModel:GetDescendants())do if desc:IsA("ClickDetector")then cd=desc break end end return closestModel,cd end return nil,nil end
local function fireClick(cd) if cd and cd.Parent then pcall(function() fireclickdetector(cd) end) end end
local function waitPause() while state.paused and not state.stopped do task.wait(0.2) end end
local function buyGunAndAmmo(char,toolName,gunModelName,ammoModelName,tpGun,tpAmmo,ammoCount) if state.stopped then return end local hrp=char:WaitForChild("HumanoidRootPart") state.originalCFrame=hrp.CFrame setNoclip(char,true) teleportAndFreeze(hrp,tpGun) if not plr.Backpack:FindFirstChild(toolName) and not char:FindFirstChild(toolName) then repeat waitPause() if state.stopped then break end local _,cd=getClosestModelByName(gunModelName,hrp.Position) fireClick(cd) task.wait(0.2) until plr.Backpack:FindFirstChild(toolName) or char:FindFirstChild(toolName) or state.stopped end teleportAndFreeze(hrp,tpAmmo) for i=1,ammoCount do waitPause() if state.stopped then break end local _,cd=getClosestModelByName(ammoModelName,hrp.Position) fireClick(cd) task.wait(0.15) end hrp.Anchored=false hrp.CFrame=state.originalCFrame setNoclip(char,false) end
local function process(char) task.wait(1) if state.processing or state.stopped then return end state.processing=true buyGunAndAmmo(char,"[Revolver]","[Revolver] - $1421","12 [Revolver Ammo] - $82",Vector3.new(-638.87,14.97,-118.53),Vector3.new(-638.87,14.97,-118.53),43) if not state.stopped then buyGunAndAmmo(char,"[Double-Barrel SG]","[Double-Barrel SG] - $1530","18 [Double-Barrel SG Ammo] - $66",Vector3.new(-1043.98,13.26,-256.09),Vector3.new(-1043.98,13.26,-256.09),43) end state.processing=false end
plr.CharacterAdded:Connect(process)
uis.InputBegan:Connect(function(input,processed) if processed then return end if input.KeyCode==Enum.KeyCode.J then state.paused=not state.paused elseif input.KeyCode==Enum.KeyCode.K then state.stopped=true end end)
